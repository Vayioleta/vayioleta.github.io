---
import WidgetLayout from './WidgetLayout.astro'

import I18nKey from '../../i18n/i18nKey'
import { i18n } from '../../i18n/translation'
import { getCategoryList } from '../../utils/content-utils'
import { getCategoryUrl } from '../../utils/url-utils'
import ButtonLink from '../control/ButtonLink.astro'

const categories = await getCategoryList()

interface Props {
  class?: string
  style?: string
}
const className = Astro.props.class
const style = Astro.props.style
---

<WidgetLayout
  name={i18n(I18nKey.categories)}
  id="categories"
  class={className}
  style={style}
>
  {categories.map((c) => (
    <ButtonLink
      url={getCategoryUrl(c.name)}
      badge={c.count}
      label={`View all posts in the ${c.name} category`}
    >
      {c.name}
    </ButtonLink>
  ))}
</WidgetLayout>
